---
import PhoneFillIcon from '/src/assets/images/phone-fill.svg';
import { btnHeroPrimary, btnSolidDarkShell, btnOutlineDarkShell } from '~/styles/buttonStyles';

export interface Props {
  label?: string;
  narrow?: boolean;
  hero?: boolean;
  solidDark?: boolean;
  class?: string;
}

const {
  label = 'Book a free call',
  narrow = false,
  hero = false,
  solidDark = false,
  class: extraClass = '',
} = Astro.props;

// HERO: always full width; parent sets max-width
// OTHER: original behavior
const heroWidthClass = 'w-full';
const widthClass =
  hero ? heroWidthClass
  : narrow ? 'w-full sm:w-fit'
  : 'w-full lg:w-fit';

const paddingX = narrow ? 'px-6 sm:px-8' : 'pl-16 pr-11';

const baseSolidDark = `${btnSolidDarkShell} ${paddingX} ${widthClass}`;
const baseOutline = `${btnOutlineDarkShell} ${paddingX} ${widthClass}`;
const baseHero = `${btnHeroPrimary} ${widthClass}`;

const baseClasses =
  hero ? baseHero
  : solidDark ? baseSolidDark
  : baseOutline;
---

<button
  type="button"
  data-cal-link="rockbookkeeping/30min"
  data-cal-namespace="30min"
  data-cal-config='{"layout":"month_view","theme":"light"}'
  aria-haspopup="dialog"
  aria-controls="cal-modal"
  class={`${baseClasses} ${extraClass}`}
>
  <PhoneFillIcon class="w-5 h-5 shrink-0" />
  <span>{label}</span>
</button>

<script is:inline>
  // existing Cal embed...
</script>
