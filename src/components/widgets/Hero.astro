---
import Image from '~/components/common/Image.astro';
import JoshSignaturePng from '/src/assets/images/josh-signature-large.png';
import CalButton from './CalButton.astro';
import CtaButton from './CtaButton.astro';
import { theme } from '~/theme';

/** @type {import('~/types/hero').HeroProps} */
const props = Astro.props;

const { headline, subheadline, primaryCta, secondaryCta, image, showSignature = true, bgColor = theme.heroBg } = props;

const primarySize = primaryCta?.size ?? 'md';

// md: keeps your original feel
// lg: gives the button room (dominant CTA)
const ctaWrapClass =
  primarySize === 'lg' ?
    'mt-2 flex flex-col gap-4 w-full sm:max-w-[520px] mx-auto lg:mx-0'
  : 'mt-2 flex flex-col gap-4 w-full sm:max-w-[340px] mx-auto lg:mx-0';
---

<section data-hero class="text-white" style={`background-color: ${bgColor};`}>
  <div class="max-w-[1600px] mx-auto px-6 xl:pl-[120px] xl:pr-[132px] pt-10 pb-24 sm:pt-16 sm:pb-20 lg:pt-24 lg:pb-32">
    <div class="flex flex-col lg:flex-row items-center lg:items-center gap-12 lg:gap-14 xl:gap-16">
      <div
        class="flex flex-col gap-8 xl:gap-9 mx-auto lg:mx-0 items-center lg:items-start text-center lg:text-left max-w-[600px] lg:pl-6 xl:pl-10"
      >
        <h1
          class="mt-0 capitalize text-[32px] leading-[1.0] sm:text-[38px] sm:leading-[1.1] md:text-[45px] md:leading-[1.1] tracking-[-0.0004em] font-black text-balance"
        >
          {headline}
        </h1>

        {
          subheadline ?
            <p class="text-base sm:text-lg leading-relaxed tracking-[0.01em] text-gray-200">{subheadline}</p>
          : null
        }

        <div class={ctaWrapClass}>
          {
            primaryCta.kind === 'cal' ?
              <CalButton narrow hero class={primaryCta.class ?? ''} label={primaryCta.label} />
            : <CtaButton narrow hero class={primaryCta.class ?? ''} label={primaryCta.label} />
          }

          {
            secondaryCta ?
              secondaryCta.kind === 'cal' ?
                <CalButton narrow hero class={secondaryCta.class ?? ''} label={secondaryCta.label} />
              : <CtaButton narrow hero variant="dark" class={secondaryCta.class ?? ''} label={secondaryCta.label} />
            : null
          }
        </div>
      </div>

      <div class="flex justify-center mt-6 lg:mt-0 lg:flex-1">
        <div class="relative w-full max-w-[300px] sm:max-w-[340px] lg:max-w-[385px] mx-auto lg:mx-0">
          <Image
            src={image.src}
            alt={image.alt}
            width={image.width}
            height={image.height}
            loading={image.loading ?? 'lazy'}
            decoding="async"
            fetchpriority={image.fetchpriority ?? 'auto'}
            class="w-full rounded-[20px] object-cover"
          />

          {
            showSignature ?
              <Image
                src={JoshSignaturePng}
                alt="Josh Cesana signature"
            width={202}
            height={44}
            loading="eager"
            decoding="async"
            fetchpriority="high"
            class="absolute -bottom-13 sm:-bottom-12 lg:-bottom-14 left-[61%] sm:left-[68%] -translate-x-1/2 w-[150px] sm:w-[190px] lg:w-[210px] h-auto"
          />
            : null
          }
        </div>
      </div>
    </div>
  </div>
</section>
