---
interface FaqItem {
  question: string;
  answer: string;
}

// Pass your FAQ items as: [{ question: '...', answer: '...' }, ...]
const { faqs = [] as FaqItem[] } = Astro.props;

// Strip HTML tags and compress whitespace
const toText = (s: string) => s.replace(/<[^>]*>/g, '').replace(/\s+/g, ' ').trim();

const data = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": faqs.map((f) => ({
    "@type": "Question",
    "name": toText(f.question),
    "acceptedAnswer": {
      "@type": "Answer",
      "text": toText(f.answer),
    },
  })),
};

// Stringify the data in the frontmatter
const jsonLd = JSON.stringify(data, null, 2);
---

<Fragment set:html={`<script type="application/ld+json">${jsonLd}</script>`} />